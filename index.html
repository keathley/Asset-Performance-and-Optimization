<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>reveal.js - The HTML Presentation Framework</title>
    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/solarized.css" id="theme">
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Asset Performance and Optimization</h1>
          <p>
            <small>
              Chris Keathley /
              <a href="http://twitter.com/ChrisKeathley">@ChrisKeathley</a>
            </small>
            <br>
            <small>
              Brett Wise /
              <a href="https://twitter.com/brettwise">@BrettWise</a>
            </small>
          </p>
        </section>

        <section>
          <h2>What we were listening to: </h2>
          <h3 class="fragment fade-in">The "Electrochill" playlist on Spotify</h3>
          <h2 class="fragment fade-in">&</h2>
          <img class="fragment fade-in" src="img/to-pimp-a-butterfly.jpg">
          <aside class="notes">
            Music is srsbsns
          </aside>
        </section>

        <section>
          <h2>What are we gunna talk about today</h2>
          <h3>Optimizing all the things</h3>
          <img src="images/optimize_all_the_things.gif" alt="">
        </section>
        <section>
          <h2>Disclaimer</h2>
          <p>
            Don't check your brain at the door
          </p>
          <aside class="notes">
            All of this is based on experience and research.  But your situation
            is always going to be different then ours so make sure that you
            test things and make decisions based on data.
          </aside>
        </section>
        <section>
          <section>
            <h2>So why do any of this?</h2>
          </section>
          <section>
            <h2>Impacts on mobile users</h2>
            <p>
              Users wait ~6 seconds before they bounce
            </p>
          </section>
          <section>
            <h1>40%</h1>
            <aside class="notes">
              40% of users will bounce after waiting 3 secs
            </aside>
          </section>
          <section>
            <h1>Count'em</h1>
            <h1>2</h1>
            <aside class="notes">
              Overall people have 2 sec expectation
            </aside>
          </section>
          <section>
            <h1>85% & 75%</h1>
            <aside class="notes">
              85 expect mobile to load as faster or faster than desktop

              75 will leave your site for comp if its slow
            </aside>
          </section>
          <section>
            <h2>Impacts on Desktop</h2>
            <p>
              Users wait ~3 seconds before they bounce
            </p>
          </section>
        </section>
        <section>
          <section>
            <h2>Measure everything</h2>
            <ul>
              <li>YSlow</li>
              <li>PageSpeed</li>
              <li>Boomerang</li>
              <li>Webpagetest</li>
            </ul>
            <aside class="notes">
              webpagetest - has a cool filmstrip feature that shows you your site's state at intervals of time as it loads answering the question how long before your page actually starts to render
            </aside>
          </section>
          <section>
            <h2>Determine your target browsers</h2>
            <aside class="notes">
              You have to know what you're dealing with in order to make
              optimizations
            </aside>
          </section>
          <section>
            <img src="img/rum.jpg">
            <aside class="notes">
              Real User Monitoring. Google Analytics has a feature to allow you to see how quickly your site is being delievered to your users on their devices. But maybe pingdom is better. Because goog just samples and doesn't give you all results. Pingdom does. And it's performance oriented. But there are lots of tools.
            </aside>
          </section>
        </section>
        <section>
          <section>
            <h2>First steps</h2>
            <img src="images/level0.gif" alt="">
          </section>
          <section>
            <h2>Enable Gzip</h2>
            <aside class="notes">
              Who gzips?
              who knows what gzip is?
              It's really easy and is free (if you pre-gzip).
              Doesn't increase clock cycles.
              Saves you money if you're going through a CDN or otherwise paying
              for transfer costs.
            </aside>
          </section>
          <section>
            <h2>Set Cache headers</h2>
            <aside class="notes">
              Cache everything for at least a year.  Make sure you have cache
              headers in order to bust cachers later.
            </aside>
          </section>
          <section>
           <h1>all-ur-images.jpg</h1>
           <aside class="notes">
             images up majority of site weight
           </aside>
         </section>
         <section>
           <h1>Image bytes = &#8599;</h1>
           <aside class="notes">
            bytes up 30% over last year
           </aside>
         </section>
         <section>
           <h1 style="font-size: 11rem">&#127815;</h1>
           <aside class="notes">
             Low hanging fruit
           </aside>
         </section>
         <section>
           <h2>???</h2>
           <aside class="notes">
             So what can we do. Glad you asked.
           </aside>
         </section>
         <section>
           <h1 style="font-size: 10rem">&#128190;</h1>
           <aside class="notes">
             We can start low tech. Basic.

             Photoshop is a good place to start. Specifically save for web feature. But which format Brett.
           </aside>
         </section>
         <section>
           <h1>JPEG</h1>
           <aside class="notes">
             Best for photos and images with many colors
           </aside>
         </section>
         <section>
           <h1>GIF</h1>
           <img class="fragment fade-in" src="img/deal.gif">
           <aside class="notes">
            don't hit next until you say following
             best used for. well you know.
           </aside>
         </section>
         <section>
           <h1>PNG</h1>
           <h2 class="fragment fade-in">8 vs. 24</h2>
           <img src="img/ie.png">
           <aside class="notes">
             Think logos.

             8 is good for images with few colors

             24 is for if you need partial transparency
           </aside>
         </section>
         <section>
          <h1>WebP?</h1>
          <h1 class="fragment fade-in">JPEG XR?</h1>
          <aside class="notes">
             webp is is a google thing

             it's good because about 25% smaller than jpegs

             jpegxr is a microsoft thing support in IE since IE9

             it's good because well maybe it's not. claim that it's better in areas like compression and has support for higher color accuracy but the tests I've seen smack that down.
           </aside>
        </section>
        </section>
        <section>
          <section>
            <h2>Intermediate</h2>
            <img src="images/level1.gif" alt="">
          </section>
          <section>
            <h2>Serve assets through a CDN</h2>
            <aside class="notes">
              How many people are currently using a CDN.
              At least turn on cloudflare.
            </aside>
          </section>
          <section>
            <h2>Avoid DNS lookups</h2>
            <aside class="notes">
              DNS lookups for CSS are expensive.  Serve everything from a
              single domain if you can.  There are exceptions to this rule,
              for instance forcing downloads in parallel.  However, by and
              large you should optimize away DNS lookups.
            </aside>
          </section>
          <section>
            <h2>Use smart caching strats</h2>
            <aside class="notes">
              It's typically good to have a vendor manifest that can be cached
              independently from the "application" code.  You probably don't/
              shouldn't change your vendor files that much.  This will keep your
              users from having to download all of your vendor assets every
              time you make a change to your application code.
            </aside>
          </section>
          <section>
            <section>
              <h1>UnCSS</h1>
              <aside class="notes">
                Build starts with sass or scss in my case.

                The prod gets uncss. Comments get removed. Everything concatted.

                Explain how it works. Feed it html or urls.
              </aside>
            </section>
          </section>
        </section>
        <section>
          <section>
            <h2>Advanced topics</h2>
            <img src="images/level2.gif" alt="">
          </section>
          <section>
            <h2>Optimize your initcwnd</h2>
            <aside class="notes">
              Who knows what the initial conngestion window is?
              Who knows how much data you can shove in a packet? (around 1500 bytes)
              When we open an http connection the browser sends the server a syn,
              the server responds with a syn,ack the browser responds with an ack
              and then the server sends some initial amount of packets. Optimally
              we can get that window to 10 which means we have around 15k worth
              of data to send.  Thus if we can get our files in that range then
              we can send the entire file in one burst and the browser doesn't
              have to send us more acks.
            </aside>
          </section>
          <section>
            <h2>Chunk files into 10k groups</h2>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h2>Create multiple entry point files</h2>
            <aside class="notes">
              You can use tools like webpack to create multiple entry points
              for a site.  That way all of the important styles are loaded on first page load
            </aside>
          </section>
          <section>
            <h2>Inline small scripts</h2>
            <aside class="notes">
              Webpack is also really good at inlinging specific scripts
              Only really worth it for very small files and in special circumstances.
            </aside>
          </section>
          <section>
           <h1>So Technology</h1>
           <br>
           <h1 style="font-size: 10rem">&#128191;</h1>
           <aside class="notes">
             how about those high tech approaches though
           </aside>
         </section>
         <section>
          <h1>Enter imgix.com</h1>
          <h2 class="fragment fade-in">Dependency-Free JS Libray</h2>
          <h2 class="fragment fade-in">Python, Ruby, Etc.</h2>
           <aside class="notes">
             it does all the things for you.

             Connect existing img store. S3 blah blah.

             First time img is requested img fetched from img store

             automatically deliever new formats like webp if end user can handle it.

             using imgix.js container size for image and pix dense is detected. then the exact image for that screen size is delievered.
           </aside>
         </section>
        </section>
        <section>
         
        </section>
        <section>
          <section>
            <h1>Crazy People Stuff</h1>
          </section>
          <section>
            <h1>Are you ready to...</h1>
            <img class="fragment fade-in" src="img/mind-blown.gif">
            <h1 class="fragment fade-in">Mind = Blown</h1>
          </section>
          <section>
            <img src="img/what-if.jpg" class="fragment fade-in">
            <h3 class="fragment fade-in">Concatination maybe not the best thing since sliced bread?</h3> 
            <aside class="notes">
              WHat if I told you...

              Concatinating all your files may not be the fastest way.

              Tell story of how you found it.

              The point is, loading only 1 file is going to hinder an important optimization method, dynamic parallel loading in favor of saving the small (but non-trivial) HTTP request overhead. 
            </aside>
          </section>
          <section>
            <img src="img/confused.gif">
            <h1>Concatination</h1>
            <h2 class="fragment fade-in">May Not Be the Best Way</h2>
            <img class="fragment fade-in" src="img/confused.gif">
            <h1 class="fragment fade-in">WTF</h1>
          </section>
          <section>
            <img src="img/internet.gif"><br>
            <a class="fragment fade-in" href="https://github.com/h5bp/lazyweb-requests/issues/5">h5bp github issues</a>
            <aside class="notes">I was hanging on the webs. gettin deep on some github issues.

            this one in particular

            </aside>
          </section>
        </section>

        <section>
          <h2>Conclusion</h2>
          <ul>
            <li>
              Hit us up on twitter or at meetups
            </li>
            <li>
              <a href="https://github.com/keathley/Asset-Performance-and-Optimization">
                These slides are on github
              </a>
            </li>
            <li>
              <a href="http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/">
                CSS Wizardry
              </a>
            </li>
            <li>
              webpagetest.org
            </li>
            <li>yslow</li>
            <li>pagespeed</li>
            <li>ImageOptim</li>
          </ul>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>
    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
